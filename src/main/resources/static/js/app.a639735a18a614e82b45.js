webpackJsonp([3],{NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("ul",[t("li",[t("router-link",{attrs:{to:{name:"home"}}},[this._v("首页")])],1),this._v(" "),t("li",[t("router-link",{attrs:{to:{name:"user"}}},[this._v("用户中心")])],1)]),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var u=r("VU/8")({name:"App",data:function(){return{}},methods:{islogin:function(){return"login"!==this.$route.name}}},o,!1,function(e){r("YkUw")},null,null).exports,a=r("/ocq"),s=r("lbHh"),i=r.n(s),l={data:function(){return{ruleForm:{password:"",checked:!0,username:""},rules:{password:[{validator:function(e,t,r){""===t?r(new Error("请输入密码")):r()},trigger:"blur"}],username:[{validator:function(e,t,r){""===t?r(new Error("请输入用户名")):r()},trigger:"blur"}]}}},created:function(){var e=i.a.get("token");console.log(e),e&&this.submit()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return e?(t.submit(),!1):(t.$message.error("请填写正确的数据后再进行提交"),!1)})},resetForm:function(e){this.$refs[e].resetFields()},submit:function(){var e=this;this.postHttp("login",this.ruleForm).then(function(t){if(t){var r=t.data;200==r.status?(e.$store.commit("setLoginInfo",r.token),e.$router.push({name:"home"})):e.$message.warning(r.msg)}})}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"自动登录"}},[r("el-switch",{model:{value:e.ruleForm.checked,callback:function(t){e.$set(e.ruleForm,"checked",t)},expression:"ruleForm.checked"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primcheckedary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var m=r("VU/8")(l,c,!1,function(e){r("VSYh")},"data-v-75ee8950",null).exports;n.default.use(a.a);var f=new a.a({routes:[{path:"/",name:"login",component:m},{path:"/user",name:"user",meta:{requireLogin:!0},component:function(e){return r.e(1).then(function(){var t=[r("ia7Y")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/home",name:"home",meta:{requireLogin:!0},component:function(e){return r.e(0).then(function(){var t=[r("wUZA")];e.apply(null,t)}.bind(this)).catch(r.oe)}}]}),p=r("zL8q"),d=r.n(p),h=(r("tvR6"),r("mvHQ")),v=r.n(h),g=r("//Fk"),b=r.n(g),w=r("mtWM"),k=r.n(w),F="http://localhost:8088/",L=r("NYxO"),I=window.localStorage;n.default.use(L.a);var _={loginInfo:I.getItem("token"),routerList:JSON.parse(I.getItem("routerList")||"[]")},E={setLoginInfo:function(e,t){e.loginInfo=t,I.setItem("token",t)},logout:function(e,t){e.loginInfo=null,I.removeItem("token")},setRouterList:function(e,t){e.routerList=t,I.setItem("routerList",v()(t))}},y=new L.a.Store({state:_,getters:{loginInfo:function(e){return e.loginInfo},routerList:function(e){return e.routerList}},mutations:E});k.a.defaults.baseURL=F,k.a.interceptors.request.use(function(e){return null!=y.getters.loginInfo&&(e.headers.Token=y.getters.loginInfo),e},function(e){return b.a.reject(e)}),k.a.interceptors.response.use(function(e){return e},function(e){switch(e.response.status){case 401:alert("没有权限");break;case 403:alert("禁止访问");break;case 404:alert("找到不到对应的资源");break;case 412:window.sessionStorage.removeItem("token"),location.reload();break;case 500:alert("服务器繁忙")}});var $=function(e,t,r){var n={method:e,baseURL:F,url:t,params:"GET"===e||"DELETE"===e?r:null,data:"POST"===e||"PUT"===e?v()(r):null,timeout:1e4,withCredentials:!0};return"POST"===e&&(n.headers={"content-type":"application/json"}),new b.a(function(e,t){k()(n).then(function(t){e(t)}).catch(function(e){t(e)})})};n.default.prototype.getHttp=function(e,t){return $("GET",e,t)},n.default.prototype.postHttp=function(e,t){return $("POST",e,t)},n.default.prototype.putHttp=function(e,t){return $("PUT",e,t)},n.default.prototype.delHttp=function(e,t){return $("DELETE",e,t)};n.default.use(d.a),n.default.config.productionTip=!1,f.beforeEach(function(e,t,r){e.meta.requireLogin&&null==y.getters.loginInfo?r({name:"login"}):r()}),new n.default({el:"#app",router:f,store:y,components:{App:u},template:"<App/>"})},VSYh:function(e,t){},YkUw:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a639735a18a614e82b45.js.map